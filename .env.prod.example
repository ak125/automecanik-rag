# ============================================
# AutoMecanik RAG Service - Production Environment
# ============================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env.prod
# 2. Replace all placeholder values with real secrets
# 3. NEVER commit .env.prod to git
#
# SECURITY CHECKLIST:
# [ ] All PROD_* secrets are unique and strong
# [ ] AI_PROD_WRITE=false (Kill Switch active)
# [ ] CORS_ORIGINS set to specific domains (not *)
# [ ] RAG_API_KEY is at least 32 characters
#

# === Environment ===
ENV=prod
DEBUG=false

# === CRITICAL SECURITY: Kill Switch ===
# NEVER set to true in production
AI_PROD_WRITE=false

# === Weaviate Vector Database ===
# Internal Docker network URL (not exposed externally)
WEAVIATE_URL=http://weaviate:8080

# === Redis Cache ===
# Internal Docker network URL (not exposed externally)
REDIS_URL=redis://redis:6379

# === API Security ===
# Generate with: openssl rand -hex 32
PROD_RAG_API_KEY=REPLACE_WITH_STRONG_64_CHAR_KEY

# === CORS Configuration ===
# Comma-separated list of allowed origins
# NEVER use * in production
CORS_ORIGINS=https://automecanik.com,https://www.automecanik.com

# === Rate Limiting ===
RATE_LIMIT_RPM=60

# === Request Limits ===
REQUEST_TIMEOUT=30
MAX_REQUEST_SIZE=1048576

# === Knowledge Corpus ===
KNOWLEDGE_PATH=/knowledge

# === Embeddings (sentence-transformers - FREE) ===
EMBEDDING_MODEL=all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384

# === RAG Quality Settings ===
MIN_SCORE_THRESHOLD=0.70
MIN_RESULTS_REQUIRED=3
RETRIEVAL_TOP_K=5
RETRIEVAL_ALPHA=0.7

# ============================================
# VERIFICATION COMMANDS
# ============================================
#
# Test API:
#   curl -H "X-API-Key: $PROD_RAG_API_KEY" http://localhost:8000/health
#
# Check Kill Switch:
#   docker exec rag-api-prod env | grep AI_PROD_WRITE
#
# Verify no external ports:
#   docker compose -f docker-compose.prod.yml ps
#   # Should show only port 8000 exposed
#
